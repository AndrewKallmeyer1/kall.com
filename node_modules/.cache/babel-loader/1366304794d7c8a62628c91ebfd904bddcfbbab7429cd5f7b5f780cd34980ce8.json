{"ast":null,"code":"import { mediaProviderElementContext } from \"./chunk.APMKZUJJ.js\";\nimport { mediaStoreContext, mediaStoreSubscription } from \"./chunk.O2H47C42.js\";\nimport { __decorateClass } from \"./chunk.LNH2V2XS.js\";\n\n// src/ui/gesture/GestureElement.ts\nimport { debounce, deferredPromise, DisposalBin, isMouseEvent, isPointerEvent, isTouchEvent, listen, storeSubscription, vdsEvent } from \"@vidstack/foundation\";\nimport { css, LitElement } from \"lit\";\nimport { property } from \"lit/decorators.js\";\nvar pendingActions = /* @__PURE__ */new Map();\nvar GestureElement = class extends LitElement {\n  constructor() {\n    super();\n    this._isUserIdle = false;\n    this._disposal = new DisposalBin();\n    this.repeat = 0;\n    this.priority = 10;\n    this.whileIdle = false;\n    this._mediaCurrentTime = 0;\n    this._currentToggleState = false;\n    this._mediaStoreConsumer = mediaStoreContext.consume(this);\n    storeSubscription(this, mediaProviderElementContext, element => {\n      this._mediaProviderElement = element;\n    });\n    mediaStoreSubscription(this, \"userIdle\", debounce($idle => {\n      this._isUserIdle = $idle;\n    }, 300));\n  }\n  static get styles() {\n    return [css`\n        :host {\n          display: block;\n          contain: content;\n          z-index: 0;\n          opacity: 0;\n          visibility: hidden;\n          pointer-events: none !important;\n        }\n\n        :host([hidden]) {\n          display: none;\n        }\n      `];\n  }\n  get _pendingActions() {\n    return this._mediaProviderElement ? pendingActions.get(this._mediaProviderElement) : void 0;\n  }\n  get _pendingAction() {\n    return this._pendingActions?.get(this);\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    window.requestAnimationFrame(() => {\n      if (this._mediaProviderElement) {\n        pendingActions.set(this._mediaProviderElement, /* @__PURE__ */new Map());\n      }\n    });\n  }\n  willUpdate(changedProperties) {\n    this._attachListener();\n    this._subscribeToToggleStore();\n    this._subscribeToSeekStore();\n    super.willUpdate(changedProperties);\n  }\n  disconnectedCallback() {\n    this._disposal.empty();\n    this._pendingAction?.[1].resolve();\n    this._pendingActions?.delete(this);\n    super.disconnectedCallback();\n  }\n  performAction(event) {\n    if (!this.action) return;\n    let detail;\n    let eventType = this.action;\n    if (this.action.startsWith(\"toggle:\")) {\n      eventType = this._getToggleEventType();\n    }\n    if (this.action.startsWith(\"seek:\")) {\n      eventType = \"seek\";\n      detail = this._mediaCurrentTime + Number(this.action.split(\":\")[1]);\n    }\n    this.dispatchEvent(vdsEvent(`vds-${eventType}-request`, {\n      bubbles: true,\n      composed: true,\n      detail,\n      triggerEvent: event\n    }));\n  }\n  _attachListener() {\n    this._disposal.empty();\n    if (!this._mediaProviderElement || !this.type || !this.action) return;\n    let count = 0;\n    let timeoutId;\n    const resolve = (skip = false) => {\n      count += 1;\n      window.clearTimeout(timeoutId);\n      timeoutId = window.setTimeout(() => {\n        const promise = this._pendingAction?.[1];\n        if (skip) {\n          this._pendingActions?.delete(this);\n        }\n        processPendingActions(this._mediaProviderElement);\n        count = 0;\n        promise?.resolve();\n      }, 200);\n    };\n    const off = listen(this._mediaProviderElement, this.type, event => {\n      if (!this._validateEvent(event)) return;\n      event.preventDefault();\n      if (count == 0) {\n        this._pendingActions?.set(this, [event, deferredPromise()]);\n      }\n      resolve(count < this.repeat);\n    });\n    this._disposal.add(off);\n  }\n  _validateEvent(event) {\n    if (!this.whileIdle && this._isUserIdle) return false;\n    if (isPointerEvent(event) || isMouseEvent(event) || isTouchEvent(event)) {\n      const touch = isTouchEvent(event) ? event.touches[0] : void 0;\n      const clientX = touch?.clientX ?? event.clientX;\n      const clientY = touch?.clientY ?? event.clientY;\n      const rect = this.getBoundingClientRect();\n      const isValidRegion = clientY >= rect.top && clientY <= rect.bottom && clientX >= rect.left && clientX <= rect.right;\n      return event.type.includes(\"leave\") ? !isValidRegion : isValidRegion;\n    }\n    return true;\n  }\n  _subscribeToSeekStore() {\n    if (!this.action?.startsWith(\"seek\")) return;\n    const unsub = this._mediaStore.currentTime.subscribe($currentTime => {\n      this._mediaCurrentTime = $currentTime;\n    });\n    this._disposal.add(unsub);\n  }\n  get _mediaStore() {\n    return this._mediaStoreConsumer.value;\n  }\n  _getToggleEventType() {\n    const toggleType = this.action?.split(\":\")[1];\n    switch (toggleType) {\n      case \"paused\":\n        return this._currentToggleState ? \"play\" : \"pause\";\n      case \"muted\":\n        return this._currentToggleState ? \"unmute\" : \"mute\";\n      case \"fullscreen\":\n        return `${this._currentToggleState ? \"exit\" : \"enter\"}-fullscreen`;\n      default:\n        return \"\";\n    }\n  }\n  _subscribeToToggleStore() {\n    if (!this.action?.startsWith(\"toggle:\")) return;\n    const action = this.action.split(\":\")[1];\n    const unsub = this._mediaStore[action]?.subscribe($value => {\n      this._currentToggleState = $value;\n    });\n    if (unsub) this._disposal.add(unsub);\n  }\n};\n__decorateClass([property()], GestureElement.prototype, \"type\", 2);\n__decorateClass([property({\n  type: Number\n})], GestureElement.prototype, \"repeat\", 2);\n__decorateClass([property({\n  type: Number\n})], GestureElement.prototype, \"priority\", 2);\n__decorateClass([property()], GestureElement.prototype, \"action\", 2);\n__decorateClass([property({\n  type: Boolean,\n  attribute: \"while-idle\"\n})], GestureElement.prototype, \"whileIdle\", 2);\nvar inProgress = /* @__PURE__ */new WeakSet();\nasync function processPendingActions(container) {\n  if (inProgress.has(container)) return;\n  const actions = pendingActions.get(container);\n  if (!actions) return;\n  inProgress.add(container);\n  const wait = Array.from(actions.values()).map(action => action[1].promise);\n  await Promise.all(wait);\n  const gestures = Array.from(actions.keys());\n  const highestPriority = Math.min(...gestures.map(g => g.priority));\n  gestures.filter(g => g.priority <= highestPriority).map(g => {\n    const event = actions.get(g)[0];\n    g.performAction(event);\n  });\n  actions.clear();\n  inProgress.delete(container);\n}\nexport { GestureElement };","map":{"version":3,"names":["mediaProviderElementContext","mediaStoreContext","mediaStoreSubscription","__decorateClass","debounce","deferredPromise","DisposalBin","isMouseEvent","isPointerEvent","isTouchEvent","listen","storeSubscription","vdsEvent","css","LitElement","property","pendingActions","Map","GestureElement","constructor","_isUserIdle","_disposal","repeat","priority","whileIdle","_mediaCurrentTime","_currentToggleState","_mediaStoreConsumer","consume","element","_mediaProviderElement","$idle","styles","_pendingActions","get","_pendingAction","connectedCallback","window","requestAnimationFrame","set","willUpdate","changedProperties","_attachListener","_subscribeToToggleStore","_subscribeToSeekStore","disconnectedCallback","empty","resolve","delete","performAction","event","action","detail","eventType","startsWith","_getToggleEventType","Number","split","dispatchEvent","bubbles","composed","triggerEvent","type","count","timeoutId","skip","clearTimeout","setTimeout","promise","processPendingActions","off","_validateEvent","preventDefault","add","touch","touches","clientX","clientY","rect","getBoundingClientRect","isValidRegion","top","bottom","left","right","includes","unsub","_mediaStore","currentTime","subscribe","$currentTime","value","toggleType","$value","prototype","Boolean","attribute","inProgress","WeakSet","container","has","actions","wait","Array","from","values","map","Promise","all","gestures","keys","highestPriority","Math","min","g","filter","clear"],"sources":["/Users/andrewkallmeyer/kall.com/node_modules/@vidstack/player/dist/dev/chunks/chunk.ZIGXS4GT.js"],"sourcesContent":["import {\n  mediaProviderElementContext\n} from \"./chunk.APMKZUJJ.js\";\nimport {\n  mediaStoreContext,\n  mediaStoreSubscription\n} from \"./chunk.O2H47C42.js\";\nimport {\n  __decorateClass\n} from \"./chunk.LNH2V2XS.js\";\n\n// src/ui/gesture/GestureElement.ts\nimport {\n  debounce,\n  deferredPromise,\n  DisposalBin,\n  isMouseEvent,\n  isPointerEvent,\n  isTouchEvent,\n  listen,\n  storeSubscription,\n  vdsEvent\n} from \"@vidstack/foundation\";\nimport { css, LitElement } from \"lit\";\nimport { property } from \"lit/decorators.js\";\nvar pendingActions = /* @__PURE__ */ new Map();\nvar GestureElement = class extends LitElement {\n  constructor() {\n    super();\n    this._isUserIdle = false;\n    this._disposal = new DisposalBin();\n    this.repeat = 0;\n    this.priority = 10;\n    this.whileIdle = false;\n    this._mediaCurrentTime = 0;\n    this._currentToggleState = false;\n    this._mediaStoreConsumer = mediaStoreContext.consume(this);\n    storeSubscription(this, mediaProviderElementContext, (element) => {\n      this._mediaProviderElement = element;\n    });\n    mediaStoreSubscription(\n      this,\n      \"userIdle\",\n      debounce(($idle) => {\n        this._isUserIdle = $idle;\n      }, 300)\n    );\n  }\n  static get styles() {\n    return [\n      css`\n        :host {\n          display: block;\n          contain: content;\n          z-index: 0;\n          opacity: 0;\n          visibility: hidden;\n          pointer-events: none !important;\n        }\n\n        :host([hidden]) {\n          display: none;\n        }\n      `\n    ];\n  }\n  get _pendingActions() {\n    return this._mediaProviderElement ? pendingActions.get(this._mediaProviderElement) : void 0;\n  }\n  get _pendingAction() {\n    return this._pendingActions?.get(this);\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    window.requestAnimationFrame(() => {\n      if (this._mediaProviderElement) {\n        pendingActions.set(this._mediaProviderElement, /* @__PURE__ */ new Map());\n      }\n    });\n  }\n  willUpdate(changedProperties) {\n    this._attachListener();\n    this._subscribeToToggleStore();\n    this._subscribeToSeekStore();\n    super.willUpdate(changedProperties);\n  }\n  disconnectedCallback() {\n    this._disposal.empty();\n    this._pendingAction?.[1].resolve();\n    this._pendingActions?.delete(this);\n    super.disconnectedCallback();\n  }\n  performAction(event) {\n    if (!this.action)\n      return;\n    let detail;\n    let eventType = this.action;\n    if (this.action.startsWith(\"toggle:\")) {\n      eventType = this._getToggleEventType();\n    }\n    if (this.action.startsWith(\"seek:\")) {\n      eventType = \"seek\";\n      detail = this._mediaCurrentTime + Number(this.action.split(\":\")[1]);\n    }\n    this.dispatchEvent(\n      vdsEvent(`vds-${eventType}-request`, {\n        bubbles: true,\n        composed: true,\n        detail,\n        triggerEvent: event\n      })\n    );\n  }\n  _attachListener() {\n    this._disposal.empty();\n    if (!this._mediaProviderElement || !this.type || !this.action)\n      return;\n    let count = 0;\n    let timeoutId;\n    const resolve = (skip = false) => {\n      count += 1;\n      window.clearTimeout(timeoutId);\n      timeoutId = window.setTimeout(() => {\n        const promise = this._pendingAction?.[1];\n        if (skip) {\n          this._pendingActions?.delete(this);\n        }\n        processPendingActions(this._mediaProviderElement);\n        count = 0;\n        promise?.resolve();\n      }, 200);\n    };\n    const off = listen(this._mediaProviderElement, this.type, (event) => {\n      if (!this._validateEvent(event))\n        return;\n      event.preventDefault();\n      if (count == 0) {\n        this._pendingActions?.set(this, [event, deferredPromise()]);\n      }\n      resolve(count < this.repeat);\n    });\n    this._disposal.add(off);\n  }\n  _validateEvent(event) {\n    if (!this.whileIdle && this._isUserIdle)\n      return false;\n    if (isPointerEvent(event) || isMouseEvent(event) || isTouchEvent(event)) {\n      const touch = isTouchEvent(event) ? event.touches[0] : void 0;\n      const clientX = touch?.clientX ?? event.clientX;\n      const clientY = touch?.clientY ?? event.clientY;\n      const rect = this.getBoundingClientRect();\n      const isValidRegion = clientY >= rect.top && clientY <= rect.bottom && clientX >= rect.left && clientX <= rect.right;\n      return event.type.includes(\"leave\") ? !isValidRegion : isValidRegion;\n    }\n    return true;\n  }\n  _subscribeToSeekStore() {\n    if (!this.action?.startsWith(\"seek\"))\n      return;\n    const unsub = this._mediaStore.currentTime.subscribe(($currentTime) => {\n      this._mediaCurrentTime = $currentTime;\n    });\n    this._disposal.add(unsub);\n  }\n  get _mediaStore() {\n    return this._mediaStoreConsumer.value;\n  }\n  _getToggleEventType() {\n    const toggleType = this.action?.split(\":\")[1];\n    switch (toggleType) {\n      case \"paused\":\n        return this._currentToggleState ? \"play\" : \"pause\";\n      case \"muted\":\n        return this._currentToggleState ? \"unmute\" : \"mute\";\n      case \"fullscreen\":\n        return `${this._currentToggleState ? \"exit\" : \"enter\"}-fullscreen`;\n      default:\n        return \"\";\n    }\n  }\n  _subscribeToToggleStore() {\n    if (!this.action?.startsWith(\"toggle:\"))\n      return;\n    const action = this.action.split(\":\")[1];\n    const unsub = this._mediaStore[action]?.subscribe(($value) => {\n      this._currentToggleState = $value;\n    });\n    if (unsub)\n      this._disposal.add(unsub);\n  }\n};\n__decorateClass([\n  property()\n], GestureElement.prototype, \"type\", 2);\n__decorateClass([\n  property({ type: Number })\n], GestureElement.prototype, \"repeat\", 2);\n__decorateClass([\n  property({ type: Number })\n], GestureElement.prototype, \"priority\", 2);\n__decorateClass([\n  property()\n], GestureElement.prototype, \"action\", 2);\n__decorateClass([\n  property({ type: Boolean, attribute: \"while-idle\" })\n], GestureElement.prototype, \"whileIdle\", 2);\nvar inProgress = /* @__PURE__ */ new WeakSet();\nasync function processPendingActions(container) {\n  if (inProgress.has(container))\n    return;\n  const actions = pendingActions.get(container);\n  if (!actions)\n    return;\n  inProgress.add(container);\n  const wait = Array.from(actions.values()).map((action) => action[1].promise);\n  await Promise.all(wait);\n  const gestures = Array.from(actions.keys());\n  const highestPriority = Math.min(...gestures.map((g) => g.priority));\n  gestures.filter((g) => g.priority <= highestPriority).map((g) => {\n    const event = actions.get(g)[0];\n    g.performAction(event);\n  });\n  actions.clear();\n  inProgress.delete(container);\n}\n\nexport {\n  GestureElement\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}